<title>系统参数</title>

<div class="layui-fluid">
	<div class="layui-card">
		<div class="layui-form layui-card-header layuiadmin-card-header-auto" lay-filter="app-content-list">

			<div class="layui-form-item">
				<!-- 搜索按钮 -->
				<div class="layui-inline">
					<button class="layui-btn layuiadmin-btn-list" lay-submit lay-filter="LAY-app-contlist-search">
						修改信息
					</button>
				</div>
			</div>

			<div class="layui-form-item">
				<div class="layui-inline">
					<label class="layui-form-label">公司名称</label>
					<div class="layui-input-inline">
						<input type="text" name="" lay-verify="" placeholder="公司名称" autocomplete="off" class="layui-input date">
					</div>
				</div>
				<div class="layui-inline">
					<label class="layui-form-label">联系人</label>
					<div class="layui-input-inline">
						<input type="text" name="" lay-verify="" placeholder="联系人" autocomplete="off" class="layui-input date">
					</div>
				</div>
				<div class="layui-inline">
					<label class="layui-form-label">电话</label>
					<div class="layui-input-inline">
						<input type="text" name="" lay-verify="" placeholder="电话" autocomplete="off" class="layui-input date">
					</div>
				</div>
				<div class="layui-inline">
					<label class="layui-form-label">隐藏停用的部门</label>
					<div class="layui-input-inline">
						<select name="type" lay-verify="" lay-search="">
							<option value="">--是--</option>
							<option value="1">--否--</option>
						</select>
					</div>
				</div>
				<div class="layui-inline">
					<label class="layui-form-label">联系邮编</label>
					<div class="layui-input-inline">
						<input type="text" name="" lay-verify="" placeholder="联系邮编" autocomplete="off" class="layui-input date">
					</div>
				</div>
				<div class="layui-inline">
					<label class="layui-form-label">每月记薪天数</label>
					<div class="layui-input-inline">
						<input type="text" name="" lay-verify="" placeholder="--天数--" autocomplete="off" class="layui-input date">
					</div>
				</div>
				<div class="layui-inline">
					<label class="layui-form-label">每天工资小时</label>
					<div class="layui-input-inline">
						<input type="text" name="" lay-verify="" placeholder="--时间--" autocomplete="off" class="layui-input date">
					</div>
				</div>
				<div class="layui-inline">
					<label class="layui-form-label">隐藏停用的课程</label>
					<div class="layui-input-inline">
						<select name="type" lay-verify="" lay-search="">
							<option value="">--是--</option>
							<option value="1">--否--</option>
						</select>
					</div>
				</div>
				<div class="layui-inline">
					<label class="layui-form-label">计划起始月</label>
					<div class="layui-input-inline">
						<input type="text" name="" lay-verify="" placeholder="--月份--" autocomplete="off" class="layui-input date">
					</div>
				</div>
				<div class="layui-inline">
					<label class="layui-form-label">备注</label>
					<div class="layui-input-inline">
						<input type="text" name="" lay-verify="" placeholder="备注" autocomplete="off" class="layui-input date">
					</div>
				</div>
				<div class="layui-inline">
					<label class="layui-form-label">评估分制</label>
					<div class="layui-input-inline">
						<select name="type" lay-verify="" lay-search="">
							<option value="">--请选择--</option>
							<option value="1">5</option>
							<option value="2">10</option>
							<option value="3">15</option>
							<option value="4">20</option>
						</select>
					</div>
				</div>

			</div>
			<div class="layui-card-body">

				<script type="text/html" id="buttonTpl">
					{{#  if(d.checkStatus==1){ }}
				    <button class="layui-btn layui-btn-normal layui-btn-xs">保存</button>
				    {{#  } else if(d.checkStatus==2) { }}
				    <button class="layui-btn layui-btn-warm layui-btn-xs">审核中</button>
				    {{#  } else if(d.checkStatus==3) { }}
				    <button class="layui-btn layui-btn-xs">审核通过</button>
				    {{#  } else if(d.checkStatus==4) { }}
				    <button class="layui-btn layui-btn-danger layui-btn-xs">审核失败</button>
				    {{#  } else { }}
				    <button class="layui-btn layui-btn-disabled layui-btn-xs">废弃</button>
				    {{#  } }}
				</script>
			</div>
		</div>

	</div>
	<div class="layui-form layui-card-header layuiadmin-card-header-auto" lay-filter="app-content-list">
		<div class="layui-tab layui-tab-card" lay-filter="" lay-allowclose="true">
			<ul class="layui-tab-title">
				<li data-status="" class="layui-this">附件类型</li>
				<li data-status="1">职位族</li>
				<li data-status="2">评估项目</li>
			</ul>

			<div class="layui-tab-content">

				<!-- 附件类型，默认开始 -->
				<div class="layui-tab-item layui-show">
					<div style="padding-bottom: 10px;">
						<button class="layui-btn layuiadmin-btn-list" data-type="">新增</button>
						<button class="layui-btn layuiadmin-btn-list" data-type="">修改</button>
					</div>
					<div class="layui-tab-item layui-show">
						<script type="text/html" id="table-content-list">
							<a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="edit"><i
						            class="layui-icon layui-icon-edit"></i>编辑</a>
						    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del"><i
						            class="layui-icon layui-icon-delete"></i>删除</a>
						</script>
						<table id="LAY-app-content-list1" lay-filter="LAY-app-content-list1"></table>
					</div>
				


				<script>
					layui.use(['admin', 'contlist', 'table', 'form', 'laydate', 'element'], function() {
						var $ = layui.$,
							admin = layui.admin,
							view = layui.view,
							table = layui.table,
							laydate = layui.laydate,
							form = layui.form,
							element = layui.element;

						//表格渲染
						table.render({
								elem: '#LAY-app-content-list1',
								url: commonSrc + '',
								request: {
									pageName: 'pageNum' //页码的参数名称，默认：page
										,
									limitName: 'pageSize' //每页数据量的参数名，默认：limit
								},
								response: {
									statusCode: 200 //规定成功的状态码，默认：0
								},
								parseData: function(res) { //res 即为原始返回的数据
									return {
										"code": res.code, //解析接口状态
										"msg": res.desc, //解析提示文本
										"count": res.total, //解析数据长度
										"data": res.dataList //解析数据列表
									};
								},

								cols: [
									[{
										type: 'checkbox',
										fixed: "left"
									}, {
										field: 'id',
										title: 'id',
										hide: true,
									}, {
										field: 'endTime',
										title: '子模块1',
										align: 'center'
									}, {
										field: 'applyTime',
										title: '成本中心',
										align: 'center'
									}, {
										field: 'applyType',
										title: '到岗日期',
										align: 'center'
									}, {
										field: 'checkStatus',
										title: '离职日期',
										templet: "#buttonTpl",
										minWidth: 80,
										align: 'center'
									}, {
										fixed: 'right',
										title: '操作',
										toolbar: '#table-content-list',
										minWidth: 150,
									}]
								],
								page: !0,
								limit: 10,
								limits: [10, 15, 20, 25, 30],
							}),

							table.on("tool(LAY-app-content-list1)", function(obj) {
								var data = obj.data;
								"del" === obj.event ? layer.confirm("确定删除此文章？", function(e) {
									$.ajax({
										url: commonSrc + "api/hr/sysOvertimeController/deleteOvertime", //换成自己的url
										type: "GET",
										dataType: "json",
										data: {
											id: data.id,
											applyId: data.commonId
										},
										success: function(b) {
											layer.msg('删除成功');
											obj.del(), layer.close(e)
										},
										error: function(e) {
											layer.msg('删除失败')
											layer.msg(e);
										}
									})
								}) : "edit" === obj.event && admin.popup({
									title: "",
									area: ['720px', '700px'],
									id: "LAY-popup-content-edit",
									success: function(t, layero) {
										view(this.id).render("apply/overtime/OvertimeApplyForm", data).done(function() {
											$.ajax({
												url: commonSrc + "api/hr/sysOvertimeController/selectOvertimeById", //换成自己的url
												type: "GET",
												dataType: "json",
												data: {
													id: data.id
												},
												success: function(e) {
													//layer.msg(e.contractCheckVo);
													let obj = e.data;
													form.val("layuiadmin-app-form-list", {
														"id": obj.id,
														"commonId": obj.commonId,
														"overtimeCode": obj.overtimeCode,
														"startTime": obj.startTime,
														"endTime": obj.endTime,
														"overtimeType": obj.overtimeType,
														"overtimeHours": obj.overtimeHours,
														"changeRest": obj.changeRest,
														"place": obj.place,
														"reason": obj.reason,
														"remark": obj.remark,
														"detials": obj.detials,
														"applyId": obj.commonId,
														"applyTime": obj.applyTime,
														"applyType": obj.applyType,
														"checkStatus": obj.checkStatus
													});
													//日期 年-月-日
													$(".date").each(function() {
														laydate.render({
															elem: this,

															trigger: 'click',
														});
													})
													//年-月-日 时:分:秒
													$(".datetime").each(function() {
														laydate.render({
															elem: this,
															type: 'datetime',

															trigger: 'click',
															done: function(value, date, endDate) {
																var startTime = new Date($('#qBeginTime').val()).getTime();
																var endTime = new Date($('#qEndTime').val()).getTime();
																if (endTime < startTime) {
																	layer.msg('结束时间不能小于开始时间');
																	$('#qBeginTime').val($('#qEndTime').val());
																}

															}
														});
													})
												},
												error: function(e) {
													layer.msg(e);
												}
											})
											form.render(null, "layuiadmin-app-form-list"), form.on("submit(layuiadmin-app-form-submit)",
												function(
													data) {
													$.post(commonSrc + "api/hr/sysOvertimeController/updateOvertime",
														data.field,
														function(ev) {
															layer.msg("修改成功", {
																time: 1000
															}, function() {
																layui.table.reload("LAY-app-content-list1"), layer.close(layero)
															})
														});
													return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
												})
										})
									}
								})
							})


						form.render(null, 'app-content-list');

						//监听搜索
						form.on('submit(LAY-app-contlist-search)', function(data) {
							var field = data.field;
							console.log(field);
							//执行重载
							table.reload('LAY-app-content-list1', {
								where: field
							});
						});

						var active = {
							batchdel: function() {
									var checkStatus = table.checkStatus('LAY-app-content-list1'),
										checkData = checkStatus.data; //得到选中的数据

									if (checkData.length === 0) {
										return layer.msg('请选择数据');
									}
									let arr = [];
									let brr = [];
									for (var i in checkData) {
										arr += checkData[i].id + ","
									}
									for (var i in checkData) {
										brr += checkData[i].commonId + ","
									}
									layer.confirm('确定删除吗？', function(index) {
										$.ajax({
											type: "GET",
											url: commonSrc + "api/hr/sysOvertimeController/deleteAllOvertime",
											contentType: "application/json; charset=utf-8",
											dataType: "json",
											data: {
												id: arr,
												applyId: brr

											},
											success: function(json) {
												table.reload('LAY-app-content-list1');
												layer.msg('已删除');
											}
										});

										//执行 Ajax 后重载
										/*
												
															*/

									});
								}

								//添加
								,
							add: function(othis) {
								admin.popup({
									title: '添加人员信息',
									area: ['720px', '700px'],
									id: 'LAY-popup-content-add',
									success: function(layero, index) {
										view(this.id).render('staff/addstaff/OvertimeApplyForm').done(function() {
											form.render(null, 'layuiadmin-app-form-list');
											//日期
											$(".date").each(function() {
												laydate.render({
													elem: this,
													min: -7, //7天前
													max: 0, //7天后
													trigger: 'click',
													done: function(value, date, endDate) {
														var startTime = new Date($('#qBeginTime').val()).getTime();
														var endTime = new Date($('#qEndTime').val()).getTime();
														if (endTime < startTime) {
															layer.msg('结束时间不能小于开始时间');
															$('#qBeginTime').val($('#qEndTime').val());
														}

													}
												});
											})
											//年-月-日 时:分:秒
											$(".datetime").each(function() {
												laydate.render({
													elem: this,
													type: 'datetime',
													min: -7, //7天前
													max: 0, //7天后
													trigger: 'click',
												});
											})
											//监听提交
											form.on('submit(layuiadmin-app-form-submit)', function(data) {
												var field = data.field; //获取提交的字段
												$.post(commonSrc + "api/hr/sysOvertimeController/insertOvertime",
													data.field,
													function(ev) {
														layer.msg("新增成功", {
															time: 1000
														}, function() {
															layer.close(index); //执行关闭 
															layui.table.reload('LAY-app-content-list1'); //重载表格
														})
													});
												return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
											});
										});
									}
								});
							}
						};

						$('.layui-btn.layuiadmin-btn-list').on('click', function() {
							var type = $(this).data('type');
							active[type] ? active[type].call(this) : '';
						});
						//日期
						$(".date").each(function() {
							laydate.render({
								elem: this,
								trigger: 'click',
							});
						})
						/*$(".add").click(function() {
							$("table").hide();
						});*/
					})
				</script>
			</div>
			<!-- 職位族，第二個表格 -->
			<div class="layui-tab-item">
					<div style="padding-bottom: 10px;">
						<button class="layui-btn layuiadmin-btn-list" data-type="">新增</button>
						<button class="layui-btn layuiadmin-btn-list" data-type="">修改</button>
					</div>
					<div class="layui-tab-item layui-show">
						<script type="text/html" id="table-content-list">
							<a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="edit"><i
						            class="layui-icon layui-icon-edit"></i>编辑</a>
						    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del"><i
						            class="layui-icon layui-icon-delete"></i>删除</a>
						</script>
						<table id="LAY-app-content-list2" lay-filter="LAY-app-content-list2"></table>
					</div>
				
			
			
				<script>
					layui.use(['admin', 'contlist', 'table', 'form', 'laydate', 'element'], function() {
						var $ = layui.$,
							admin = layui.admin,
							view = layui.view,
							table = layui.table,
							laydate = layui.laydate,
							form = layui.form,
							element = layui.element;
			
						//表格渲染
						table.render({
								elem: '#LAY-app-content-list2',
								url: commonSrc + '',
								request: {
									pageName: 'pageNum' //页码的参数名称，默认：page
										,
									limitName: 'pageSize' //每页数据量的参数名，默认：limit
								},
								response: {
									statusCode: 200 //规定成功的状态码，默认：0
								},
								parseData: function(res) { //res 即为原始返回的数据
									return {
										"code": res.code, //解析接口状态
										"msg": res.desc, //解析提示文本
										"count": res.total, //解析数据长度
										"data": res.dataList //解析数据列表
									};
								},
			
								cols: [
									[{
										type: 'checkbox',
										fixed: "left"
									}, {
										field: 'id',
										title: 'id',
										hide: true,
									}, {
										field: 'endTime',
										title: '子模块2',
										align: 'center'
									}, {
										field: 'applyTime',
										title: '成本中心',
										align: 'center'
									}, {
										field: 'applyType',
										title: '到岗日期',
										align: 'center'
									}, {
										field: 'checkStatus',
										title: '离职日期',
										templet: "#buttonTpl",
										minWidth: 80,
										align: 'center'
									}, {
										fixed: 'right',
										title: '操作',
										toolbar: '#table-content-list',
										minWidth: 150,
									}]
								],
								page: !0,
								limit: 10,
								limits: [10, 15, 20, 25, 30],
							}),
			
							table.on("tool(LAY-app-content-list2)", function(obj) {
								var data = obj.data;
								"del" === obj.event ? layer.confirm("确定删除此文章？", function(e) {
									$.ajax({
										url: commonSrc + "api/hr/sysOvertimeController/deleteOvertime", //换成自己的url
										type: "GET",
										dataType: "json",
										data: {
											id: data.id,
											applyId: data.commonId
										},
										success: function(b) {
											layer.msg('删除成功');
											obj.del(), layer.close(e)
										},
										error: function(e) {
											layer.msg('删除失败')
											layer.msg(e);
										}
									})
								}) : "edit" === obj.event && admin.popup({
									title: "",
									area: ['720px', '700px'],
									id: "LAY-popup-content-edit",
									success: function(t, layero) {
										view(this.id).render("apply/overtime/OvertimeApplyForm", data).done(function() {
											$.ajax({
												url: commonSrc + "api/hr/sysOvertimeController/selectOvertimeById", //换成自己的url
												type: "GET",
												dataType: "json",
												data: {
													id: data.id
												},
												success: function(e) {
													//layer.msg(e.contractCheckVo);
													let obj = e.data;
													form.val("layuiadmin-app-form-list", {
														"id": obj.id,
														"commonId": obj.commonId,
														"overtimeCode": obj.overtimeCode,
														"startTime": obj.startTime,
														"endTime": obj.endTime,
														"overtimeType": obj.overtimeType,
														"overtimeHours": obj.overtimeHours,
														"changeRest": obj.changeRest,
														"place": obj.place,
														"reason": obj.reason,
														"remark": obj.remark,
														"detials": obj.detials,
														"applyId": obj.commonId,
														"applyTime": obj.applyTime,
														"applyType": obj.applyType,
														"checkStatus": obj.checkStatus
													});
													//日期 年-月-日
													$(".date").each(function() {
														laydate.render({
															elem: this,
			
															trigger: 'click',
														});
													})
													//年-月-日 时:分:秒
													$(".datetime").each(function() {
														laydate.render({
															elem: this,
															type: 'datetime',
			
															trigger: 'click',
															done: function(value, date, endDate) {
																var startTime = new Date($('#qBeginTime').val()).getTime();
																var endTime = new Date($('#qEndTime').val()).getTime();
																if (endTime < startTime) {
																	layer.msg('结束时间不能小于开始时间');
																	$('#qBeginTime').val($('#qEndTime').val());
																}
			
															}
														});
													})
												},
												error: function(e) {
													layer.msg(e);
												}
											})
											form.render(null, "layuiadmin-app-form-list"), form.on("submit(layuiadmin-app-form-submit)",
												function(
													data) {
													$.post(commonSrc + "api/hr/sysOvertimeController/updateOvertime",
														data.field,
														function(ev) {
															layer.msg("修改成功", {
																time: 1000
															}, function() {
																layui.table.reload("LAY-app-content-list2"), layer.close(layero)
															})
														});
													return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
												})
										})
									}
								})
							})
			
			
						form.render(null, 'app-content-list');
			
						//监听搜索
						form.on('submit(LAY-app-contlist-search)', function(data) {
							var field = data.field;
							console.log(field);
							//执行重载
							table.reload('LAY-app-content-list2', {
								where: field
							});
						});
			
						var active = {
							batchdel: function() {
									var checkStatus = table.checkStatus('LAY-app-content-list2'),
										checkData = checkStatus.data; //得到选中的数据
			
									if (checkData.length === 0) {
										return layer.msg('请选择数据');
									}
									let arr = [];
									let brr = [];
									for (var i in checkData) {
										arr += checkData[i].id + ","
									}
									for (var i in checkData) {
										brr += checkData[i].commonId + ","
									}
									layer.confirm('确定删除吗？', function(index) {
										$.ajax({
											type: "GET",
											url: commonSrc + "api/hr/sysOvertimeController/deleteAllOvertime",
											contentType: "application/json; charset=utf-8",
											dataType: "json",
											data: {
												id: arr,
												applyId: brr
			
											},
											success: function(json) {
												table.reload('LAY-app-content-list2');
												layer.msg('已删除');
											}
										});
			
										//执行 Ajax 后重载
										/*
												
															*/
			
									});
								}
			
								//添加
								,
							add: function(othis) {
								admin.popup({
									title: '添加人员信息',
									area: ['720px', '700px'],
									id: 'LAY-popup-content-add',
									success: function(layero, index) {
										view(this.id).render('staff/addstaff/OvertimeApplyForm').done(function() {
											form.render(null, 'layuiadmin-app-form-list');
											//日期
											$(".date").each(function() {
												laydate.render({
													elem: this,
													min: -7, //7天前
													max: 0, //7天后
													trigger: 'click',
													done: function(value, date, endDate) {
														var startTime = new Date($('#qBeginTime').val()).getTime();
														var endTime = new Date($('#qEndTime').val()).getTime();
														if (endTime < startTime) {
															layer.msg('结束时间不能小于开始时间');
															$('#qBeginTime').val($('#qEndTime').val());
														}
			
													}
												});
											})
											//年-月-日 时:分:秒
											$(".datetime").each(function() {
												laydate.render({
													elem: this,
													type: 'datetime',
													min: -7, //7天前
													max: 0, //7天后
													trigger: 'click',
												});
											})
											//监听提交
											form.on('submit(layuiadmin-app-form-submit)', function(data) {
												var field = data.field; //获取提交的字段
												$.post(commonSrc + "api/hr/sysOvertimeController/insertOvertime",
													data.field,
													function(ev) {
														layer.msg("新增成功", {
															time: 1000
														}, function() {
															layer.close(index); //执行关闭 
															layui.table.reload('LAY-app-content-list2'); //重载表格
														})
													});
												return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
											});
										});
									}
								});
							}
						};
			
						$('.layui-btn.layuiadmin-btn-list').on('click', function() {
							var type = $(this).data('type');
							active[type] ? active[type].call(this) : '';
						});
						//日期
						$(".date").each(function() {
							laydate.render({
								elem: this,
								trigger: 'click',
							});
						})
						/*$(".add").click(function() {
							$("table").hide();
						});*/
					})
				</script>
			</div>
			<!-- 評估項目，第三個表格 -->
			<div class="layui-tab-item">
					<div style="padding-bottom: 10px;">
						<button class="layui-btn layuiadmin-btn-list" data-type="">新增</button>
						<button class="layui-btn layuiadmin-btn-list" data-type="">修改</button>
					</div>
					<div class="layui-tab-item layui-show">
						<script type="text/html" id="table-content-list">
							<a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="edit"><i
						            class="layui-icon layui-icon-edit"></i>编辑</a>
						    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del"><i
						            class="layui-icon layui-icon-delete"></i>删除</a>
						</script>
						<table id="LAY-app-content-list3" lay-filter="LAY-app-content-list3"></table>
					</div>
				
			
			
				<script>
					layui.use(['admin', 'contlist', 'table', 'form', 'laydate', 'element'], function() {
						var $ = layui.$,
							admin = layui.admin,
							view = layui.view,
							table = layui.table,
							laydate = layui.laydate,
							form = layui.form,
							element = layui.element;
			
						//表格渲染
						table.render({
								elem: '#LAY-app-content-list3',
								url: commonSrc + '',
								request: {
									pageName: 'pageNum' //页码的参数名称，默认：page
										,
									limitName: 'pageSize' //每页数据量的参数名，默认：limit
								},
								response: {
									statusCode: 200 //规定成功的状态码，默认：0
								},
								parseData: function(res) { //res 即为原始返回的数据
									return {
										"code": res.code, //解析接口状态
										"msg": res.desc, //解析提示文本
										"count": res.total, //解析数据长度
										"data": res.dataList //解析数据列表
									};
								},
			
								cols: [
									[{
										type: 'checkbox',
										fixed: "left"
									}, {
										field: 'id',
										title: 'id',
										hide: true,
									}, {
										field: 'endTime',
										title: '子模块3',
										align: 'center'
									}, {
										field: 'applyTime',
										title: '成本中心',
										align: 'center'
									}, {
										field: 'applyType',
										title: '到岗日期',
										align: 'center'
									}, {
										field: 'checkStatus',
										title: '离职日期',
										templet: "#buttonTpl",
										minWidth: 80,
										align: 'center'
									}, {
										fixed: 'right',
										title: '操作',
										toolbar: '#table-content-list',
										minWidth: 150,
									}]
								],
								page: !0,
								limit: 10,
								limits: [10, 15, 20, 25, 30],
							}),
			
							table.on("tool(LAY-app-content-list3)", function(obj) {
								var data = obj.data;
								"del" === obj.event ? layer.confirm("确定删除此文章？", function(e) {
									$.ajax({
										url: commonSrc + "api/hr/sysOvertimeController/deleteOvertime", //换成自己的url
										type: "GET",
										dataType: "json",
										data: {
											id: data.id,
											applyId: data.commonId
										},
										success: function(b) {
											layer.msg('删除成功');
											obj.del(), layer.close(e)
										},
										error: function(e) {
											layer.msg('删除失败')
											layer.msg(e);
										}
									})
								}) : "edit" === obj.event && admin.popup({
									title: "",
									area: ['720px', '700px'],
									id: "LAY-popup-content-edit",
									success: function(t, layero) {
										view(this.id).render("apply/overtime/OvertimeApplyForm", data).done(function() {
											$.ajax({
												url: commonSrc + "api/hr/sysOvertimeController/selectOvertimeById", //换成自己的url
												type: "GET",
												dataType: "json",
												data: {
													id: data.id
												},
												success: function(e) {
													//layer.msg(e.contractCheckVo);
													let obj = e.data;
													form.val("layuiadmin-app-form-list", {
														"id": obj.id,
														"commonId": obj.commonId,
														"overtimeCode": obj.overtimeCode,
														"startTime": obj.startTime,
														"endTime": obj.endTime,
														"overtimeType": obj.overtimeType,
														"overtimeHours": obj.overtimeHours,
														"changeRest": obj.changeRest,
														"place": obj.place,
														"reason": obj.reason,
														"remark": obj.remark,
														"detials": obj.detials,
														"applyId": obj.commonId,
														"applyTime": obj.applyTime,
														"applyType": obj.applyType,
														"checkStatus": obj.checkStatus
													});
													//日期 年-月-日
													$(".date").each(function() {
														laydate.render({
															elem: this,
			
															trigger: 'click',
														});
													})
													//年-月-日 时:分:秒
													$(".datetime").each(function() {
														laydate.render({
															elem: this,
															type: 'datetime',
			
															trigger: 'click',
															done: function(value, date, endDate) {
																var startTime = new Date($('#qBeginTime').val()).getTime();
																var endTime = new Date($('#qEndTime').val()).getTime();
																if (endTime < startTime) {
																	layer.msg('结束时间不能小于开始时间');
																	$('#qBeginTime').val($('#qEndTime').val());
																}
			
															}
														});
													})
												},
												error: function(e) {
													layer.msg(e);
												}
											})
											form.render(null, "layuiadmin-app-form-list"), form.on("submit(layuiadmin-app-form-submit)",
												function(
													data) {
													$.post(commonSrc + "api/hr/sysOvertimeController/updateOvertime",
														data.field,
														function(ev) {
															layer.msg("修改成功", {
																time: 1000
															}, function() {
																layui.table.reload("LAY-app-content-list3"), layer.close(layero)
															})
														});
													return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
												})
										})
									}
								})
							})
			
			
						form.render(null, 'app-content-list');
			
						//监听搜索
						form.on('submit(LAY-app-contlist-search)', function(data) {
							var field = data.field;
							console.log(field);
							//执行重载
							table.reload('LAY-app-content-list3', {
								where: field
							});
						});
			
						var active = {
							batchdel: function() {
									var checkStatus = table.checkStatus('LAY-app-content-list3'),
										checkData = checkStatus.data; //得到选中的数据
			
									if (checkData.length === 0) {
										return layer.msg('请选择数据');
									}
									let arr = [];
									let brr = [];
									for (var i in checkData) {
										arr += checkData[i].id + ","
									}
									for (var i in checkData) {
										brr += checkData[i].commonId + ","
									}
									layer.confirm('确定删除吗？', function(index) {
										$.ajax({
											type: "GET",
											url: commonSrc + "api/hr/sysOvertimeController/deleteAllOvertime",
											contentType: "application/json; charset=utf-8",
											dataType: "json",
											data: {
												id: arr,
												applyId: brr
			
											},
											success: function(json) {
												table.reload('LAY-app-content-list3');
												layer.msg('已删除');
											}
										});
			
										//执行 Ajax 后重载
										/*
												
															*/
			
									});
								}
			
								//添加
								,
							add: function(othis) {
								admin.popup({
									title: '添加人员信息',
									area: ['720px', '700px'],
									id: 'LAY-popup-content-add',
									success: function(layero, index) {
										view(this.id).render('staff/addstaff/OvertimeApplyForm').done(function() {
											form.render(null, 'layuiadmin-app-form-list');
											//日期
											$(".date").each(function() {
												laydate.render({
													elem: this,
													min: -7, //7天前
													max: 0, //7天后
													trigger: 'click',
													done: function(value, date, endDate) {
														var startTime = new Date($('#qBeginTime').val()).getTime();
														var endTime = new Date($('#qEndTime').val()).getTime();
														if (endTime < startTime) {
															layer.msg('结束时间不能小于开始时间');
															$('#qBeginTime').val($('#qEndTime').val());
														}
			
													}
												});
											})
											//年-月-日 时:分:秒
											$(".datetime").each(function() {
												laydate.render({
													elem: this,
													type: 'datetime',
													min: -7, //7天前
													max: 0, //7天后
													trigger: 'click',
												});
											})
											//监听提交
											form.on('submit(layuiadmin-app-form-submit)', function(data) {
												var field = data.field; //获取提交的字段
												$.post(commonSrc + "api/hr/sysOvertimeController/insertOvertime",
													data.field,
													function(ev) {
														layer.msg("新增成功", {
															time: 1000
														}, function() {
															layer.close(index); //执行关闭 
															layui.table.reload('LAY-app-content-list3'); //重载表格
														})
													});
												return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
											});
										});
									}
								});
							}
						};
			
						$('.layui-btn.layuiadmin-btn-list').on('click', function() {
							var type = $(this).data('type');
							active[type] ? active[type].call(this) : '';
						});
						//日期
						$(".date").each(function() {
							laydate.render({
								elem: this,
								trigger: 'click',
							});
						})
						/*$(".add").click(function() {
							$("table").hide();
						});*/
					})
				</script>
			</div>
